<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-09-29 Mon 16:33 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ROS Basics</title>
<meta name="author" content="Matthew Elwin" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="./../pubme.css" type="text/css"/>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../index.html"> UP </a>
 |
 <a accesskey="H" href="./../index.html"> HOME </a>
</div><div id="content" class="content">
<header>
<h1 class="title">ROS Basics</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#introduction-1-P-3">Introduction</a></li>
<li><a href="#documentation-1-P-3">Documentation</a>
<ul>
<li><a href="#deprecated-documentation-2-P-1">Deprecated Documentation</a></li>
</ul>
</li>
<li><a href="#workspaces-1-P-1">Workspaces</a></li>
<li><a href="#packages-1-P-1">Packages</a>
<ul>
<li><a href="#installation-2-P-2">Installation</a></li>
<li><a href="#metadata-2-P-1">Metadata</a></li>
<li><a href="#rosdep-2-P-1">rosdep</a></li>
</ul>
</li>
<li><a href="#nodes-1-P-1">Nodes</a>
<ul>
<li><a href="#running-nodes-2-P-1">Running Nodes</a></li>
</ul>
</li>
<li><a href="#inter-node-communication-1-P-1">Inter-Node Communication</a>
<ul>
<li><a href="#topics-2-P-1">Topics</a></li>
<li><a href="#services-2-P-2">Services</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#interfaces-2-P-2">Interfaces</a>
<ul>
<li><a href="#ros-idl-3-P-1">ROS IDL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ros-graph-1-P-1">ROS Graph</a>
<ul>
<li><a href="#differences-from-ros-1-2-P-1">Differences from ROS 1</a></li>
</ul>
</li>
<li><a href="#parameters">Parameters</a>
<ul>
<li>
<ul>
<li><a href="#yaml-files-3-P-1">Yaml Files</a></li>
</ul>
</li>
<li><a href="#differences-from-ros-1-2-P-2">Differences from ROS 1</a></li>
</ul>
</li>
<li><a href="#launchfiles-1-P-1">Launchfiles</a></li>
<li><a href="#bags-1-P-1">Bags</a></li>
<li><a href="#logging-1-P-1">Logging</a></li>
<li><a href="#debugging-1-P-1">Debugging</a></li>
<li><a href="#names">Naming in ROS</a></li>
<li><a href="#understanding-names-1-P-2">Understanding Names</a>
<ul>
<li><a href="#example-2-P-3">Example</a></li>
<li><a href="#comparison-with-ros-1-2-P-2">Comparison with ROS 1</a></li>
<li><a href="#remapping">Manipulating Names</a>
<ul>
<li><a href="#a-node-s-ros-api-3-P-1">A Node's ROS API</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ros-2-structure-1-P-1">ROS 2 Structure</a></li>
</ul>
</div>
</nav>

<div id="outline-container-introduction-1-P-3" class="outline-2">
<h2 id="introduction-1-P-3">Introduction</h2>
<div class="outline-text-2" id="text-org59fb9a8">
<p>
The ROS ecosystem consists of a collection of tools, software, and documentation.
These are used to describe, implement, and inspect a ROS program, which consists of multiple processes (called <i>nodes</i>)
that run in parallel and communicate with each other using inter-process communication.
</p>
</div>
</div>

<div id="outline-container-documentation-1-P-3" class="outline-2">
<h2 id="documentation-1-P-3">Documentation</h2>
<div class="outline-text-2" id="text-org450965d">
<ul class="org-ul">
<li><a href="https://docs.ros.org">https://docs.ros.org</a>: The main documentation for ROS</li>
<li>The official <a href="https://docs.ros.org/en/kilted/Tutorials.html">ROS Tutorials</a>. The beginner tutorials are especially worth doing.</li>
<li><a href="https://index.ros.org">https://index.ros.org</a> The ROS index tracks ROS packages and links to documentation for them.
<ul class="org-ul">
<li>This page is extremely useful and should be your first stop when trying to learn about a package.</li>
<li>It allows search based on ROS distribution</li>
<li>Search for "system dependencies" (e.g., packages that are downloaded from Ubuntu)</li>
<li>Search for "ROS dependencies" (i.e., packages that are downloaded from ROS servers).</li>
</ul></li>
<li><a href="https://docs.ros.org/en/kilted/p">https://docs.ros.org/en/kilted/p</a> Package-level API documentation
<ul class="org-ul">
<li>Somewhat a work-in progress</li>
</ul></li>
<li><a href="https://robotics.stackexchange.com">https://robotics.stackexchange.com</a> - The preferred Q &amp; A website for asking ROS questions.</li>
<li><a href="https://www.ros.org/reps/rep-0000.html">ROS Enhancement Proposals (REP)</a> - Documents ROS design decisions and best practices.</li>
<li>Built-in documentation: Most ros tools accept a <code>--help</code> or <code>-h</code> argument to display their help.</li>
<li>External Documentation: Sometimes the package itself has an external documentation website (often linked on the ROS wiki, often on the repository page).</li>
<li>Some of the tools used in ROS are actually maintained separately from ROS and have their own documentation as well.</li>
<li>The source code is often the ultimate documentation. Do not be afraid to read the code.</li>
<li>Part of this course is about learning how to use the documentation, so not all the answers will be provided in these notes or in lecture!</li>
</ul>
</div>

<div id="outline-container-deprecated-documentation-2-P-1" class="outline-3">
<h3 id="deprecated-documentation-2-P-1">Deprecated Documentation</h3>
<div class="outline-text-3" id="text-org523e645">
<p>
Sometimes there is a lot of overlap between ROS 1 and ROS 2 packages but the ROS 2 packages are not yet documented.
</p>
<ul class="org-ul">
<li><a href="https://wiki.ros.org">https://wiki.ros.org</a> - The ROS wiki is the main documentation for ROS 1.</li>
<li><a href="https://answers.ros.org">https://answers.ros.org</a> on August 11, 2023 in favor of the robotics stack exchange website. It is still available in read-only mode.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-workspaces-1-P-1" class="outline-2">
<h2 id="workspaces-1-P-1">Workspaces</h2>
<div class="outline-text-2" id="text-org91607d7">
<ul class="org-ul">
<li>By default ROS 2 commands are not on the <code>PATH</code> and cannot be found</li>
<li>At least one ROS 2 workspace must be "sourced" before you can run ROS 2</li>
<li>When you installed ROS 2 you added the line <code>source /opt/ros/kilted/setup.bash</code> to the <code>~/.bashrc</code> file.
<ul class="org-ul">
<li>This line puts <code>ros2</code> commands on the <code>PATH</code> so that you can use them</li>
<li>If the <code>ros2</code> command is not found, it likely means the workspace has not been sourced</li>
<li>The first workspace you source (e.g., at <code>/opt/ros/kilted</code>) is called the <i>underlay</i></li>
<li>Subsequent workspaces you source (e.g., for your project) are <i>overlays</i></li>
</ul></li>
<li>The <a href="http://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">ROS2 Configuring Environment Tutorial</a> goes through the process of setting up the ROS 2 environment</li>
</ul>
</div>
</div>

<div id="outline-container-packages-1-P-1" class="outline-2">
<h2 id="packages-1-P-1">Packages</h2>
<div class="outline-text-2" id="text-orge8763e9">
<p>
<a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">Packages</a> are the basic organization unit for ROS components.
</p>
<ul class="org-ul">
<li>Packages are created from source code and data (e.g., python files, C++ files, configuration files, interface descriptions).</li>
<li>Packages are distributed either as source code (e.g., as a git repository or a tarball) or as a binary file (e.g., a debian (<code>.deb</code>) file).</li>
<li>Some packages rely on other packages to function. If package <code>A</code> depends on packages <code>B</code> and <code>C</code> then packages <code>B</code> and <code>C</code> are <i>dependencies</i> of package <code>A</code>.</li>
<li>Many ROS packages depend on packages that are distributed with Ubuntu.
<ul class="org-ul">
<li>Packages distributed with the operating system (e.g., Ubuntu) are called <i>system dependencies</i>.</li>
</ul></li>
</ul>
</div>

<div id="outline-container-installation-2-P-2" class="outline-3">
<h3 id="installation-2-P-2">Installation</h3>
<div class="outline-text-3" id="text-org10d3491">
<p>
There are a few ways to install and use packages in ROS:
</p>
<ol class="org-ol">
<li>ROS provides a central <code>apt</code> repository where packages released for the ROS distribution (e.g., <code>kilted</code>) can be downloaded using <code>apt</code>.
<ul class="org-ul">
<li><code>sudo apt install ros-kilted-&lt;package-name&gt;</code>, where <code>&lt;package-name&gt;</code> is the package name where the underscores (<code>_</code>) have been changed to dashes (<code>-</code>).</li>
<li>This method is the most common for installing ROS packages and is preferred.</li>
</ul></li>

<li>You can download the source code for the package, build it, and use it:
<ul class="org-ul">
<li>This method is used if the binary package is unavailable or you wish to modify a package.</li>
</ul></li>

<li>You can use a language-specific package manager (e.g., <code>pip</code> for python).
<ul class="org-ul">
<li>The ROS dependency system does not handle such packages.</li>
<li>If you wish to publish a ROS package and have it included in the ROS distribution, you must also package any dependencies that are not available via <code>apt</code>.</li>
</ul></li>

<li>The <a href="https://index.ros.org">ROS Index</a> provides information on all ROS packages and dependencies, including information about:
<ul class="org-ul">
<li>What versions of ROS the package is released for.</li>
<li>The location of the source code.</li>
<li>Package documentation.</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-metadata-2-P-1" class="outline-3">
<h3 id="metadata-2-P-1">Metadata</h3>
<div class="outline-text-3" id="text-orgadb63fe">
<ul class="org-ul">
<li>Metadata about ROS packages is stored in a manifest file called <code>package.xml</code> (sometimes referred to as the package <i>manifest</i>).
<ul class="org-ul">
<li>Metadata includes dependency information, author information, a package description, etc.</li>
</ul></li>
<li>You can view the package manifest for any ROS package using <code>ros2 pkg xml &lt;package&gt;</code>, where <code>&lt;package&gt;</code> is the package's name.
<ul class="org-ul">
<li><code>ros2 pkg --help</code> provides a list of other useful <code>pkg</code> commands.</li>
<li><code>ros2 pkg</code> is part of the <a href="https://index.ros.org/p/ros2cli/github-ros2-ros2cli/#kilted">ros2cli</a> package, the ROS 2 Command Line Interface.</li>
</ul></li>
<li>The format for <code>package.xml</code> is specified in <a href="https://ros.org/reps/rep-0149.html">REP 0149</a>.</li>
<li>In ROS 2, meta information about packages is stored in the location <code>&lt;prefix&gt;/share/ament_index</code>
<ul class="org-ul">
<li>The <code>&lt;prefix&gt;</code> directory is the location where the package is installed (for your main ROS installation it is <code>/opt/ros/kilted</code>)</li>
</ul></li>
<li>The structure of the <code>ament_index</code> directory provides information about the package. Development of this index is ongoing.</li>
</ul>
</div>
</div>

<div id="outline-container-rosdep-2-P-1" class="outline-3">
<h3 id="rosdep-2-P-1">rosdep</h3>
<div class="outline-text-3" id="text-orgce9e97a">
<ul class="org-ul">
<li>ROS maintains a tool called <a href="https://docs.ros.org/en/independent/api/rosdep/html/">rosdep</a> which enables ROS packages
to specify their dependencies on other ROS packages and on system dependencies.</li>
<li>The <a href="https://github.com/ros/rosdistro">rosdistro</a> repository maintains a list of system dependencies that ROS packages can use.</li>
<li><code>rosdep</code> is useful if you are installing packages from source code and want to download their dependencies first.</li>
<li><a href="https://docs.ros.org/en/kilted/Tutorials/Intermediate/Rosdep.html">rosdep tutorial</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-nodes-1-P-1" class="outline-2">
<h2 id="nodes-1-P-1">Nodes</h2>
<div class="outline-text-2" id="text-org2dd7a5c">
<ul class="org-ul">
<li>A <a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Nodes.html">Node</a><a href="http://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">Node</a> in ROS executes code and communicates with other nodes.</li>
<li><p>
A Node is often its own process, but in ROS 2 multiple nodes may run under a single process (e.g., to reduce communication overhead).
</p>
<details class="folded"><summary>Details</summary>
<ul class="org-ul">
<li>A node needs to be made in a specific way to be <i>composable</i>. A Composable Node is referred to as a <i>component</i>.</li>
<li>Composable nodes can currently only be written in C++.</li>
<li><a href="https://docs.ros.org/en/kilted/Tutorials/Intermediate/Composition.html?highlight=composable">Tutorial on Composable Nodes</a></li>
</ul>
</details></li>
<li>Nodes use ROS <a href="https://docs.ros.org/en/kilted/Concepts/About-ROS-2-Client-Libraries.html">client library</a> to connect with other nodes.
<ul class="org-ul">
<li><a href="http://docs.ros.org/en/kilted/p/rclpy/">rclpy</a> is the Python client library.</li>
<li><a href="https://docs.ros.org/en/kilted/p/rcl/">rcl</a> is the C client library, upon which the other client libraries are built.</li>
<li><a href="https://docs.ros.org/en/kilted/p/rclcpp/">rclcpp</a> is the C++ client library.</li>
</ul></li>
<li>Each node communicates with other nodes (which may be running in the same process, different processes on the same computer, or on different computers) to form
a complete robotic system.</li>
<li>In ROS 2 <a href="https://docs.ros.org/en/kilted/Tutorials/Demos/Managed-Nodes.html">Lifecycles</a> may be used to manage and control when and how a node runs.
<ul class="org-ul">
<li>Lifecycle nodes can currently only be written in C++.</li>
</ul></li>
<li>Use <code>ros2 node list</code> to list all running nodes.</li>
<li>See the <a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Nodes.html">Nodes</a> conceptual documentation for more information.</li>
</ul>
</div>
<div id="outline-container-running-nodes-2-P-1" class="outline-3">
<h3 id="running-nodes-2-P-1">Running Nodes</h3>
<div class="outline-text-3" id="text-orgec99168">
<ul class="org-ul">
<li>Start a node with <code>ros2 run &lt;package&gt; &lt;node&gt;</code></li>
<li>Nodes can also take <a href="https://docs.ros.org/en/kilted/How-To-Guides/Node-arguments.html">command-line arguments</a></li>
<li>In ROS 1, a command <code>rosnode kill nodename</code> existed. There is no equivalent <a href="https://github.com/ros2/design/issues/287">currently in ROS 2</a>.
<ul class="org-ul">
<li>Instead you should kill the proccess running the ndoe</li>
<li>Often, you can accomplish this with <code>pkill nodename</code>.  You can also <code>ps aux | grep ros</code> to locate ROS nodes</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-inter-node-communication-1-P-1" class="outline-2">
<h2 id="inter-node-communication-1-P-1">Inter-Node Communication</h2>
<div class="outline-text-2" id="text-org0c4f1d4">
<p>
In ROS, there are a few methods for nodes to exchange information.  These modes work whether the nodes are running within the same process,
on different processes on the same computer, or on different computers.
</p>
</div>
<div id="outline-container-topics-2-P-1" class="outline-3">
<h3 id="topics-2-P-1">Topics</h3>
<div class="outline-text-3" id="text-orgee57c3a">
<p>
<a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">Topics</a> are labeled channels for communication between nodes and are an implementation of a Publish/Subscribe communication pattern.
</p>
<ul class="org-ul">
<li>A node can provide information by <i>publishing</i> a <i>message</i> to a <i>topic</i>.</li>
<li>A node can receive information by <i>subscribing</i> to a <i>topic</i>.</li>
<li>When a node publishes a message to a topic all nodes that have subscribed to that topic receive the message.</li>
<li>Topics are a many-to-many communication channel: any number of nodes may publish or subscribe to a given topic.</li>
<li><code>ros2 topic</code> provides commands for investigating topics.</li>
<li><code>rqt_plot</code> (<code>ros2 run rqt_plot rqt_plot</code>) can plot a topic value over time;
<ul class="org-ul">
<li>An <code>rqt</code> plot can also be added to the GUI when running <code>rqt</code></li>
</ul></li>
<li><code>rqt</code> also provides plugins for working with topics.</li>
<li>See the <a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Topics.html">Topics</a> conceptual documentation for more information.</li>
</ul>
</div>
</div>

<div id="outline-container-services-2-P-2" class="outline-3">
<h3 id="services-2-P-2">Services</h3>
<div class="outline-text-3" id="text-org6686970">
<p>
<a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">Services</a> provide a request/response mechanism for inter-node communication.
</p>
<ul class="org-ul">
<li>A node provides a <i>service</i> by creating a <i>service server</i> (sometimes referred to as just a <i>server</i>).</li>
<li>A node calls a <i>service</i> by creating a <i>service client</i> (sometimes referred to as just a <i>client</i>).</li>
<li>A service client sends a <i>request</i> to a service server and the service server replies by sending a <i>response</i> to the service client.</li>
<li>Services are useful for sending infrequent signals to a node or for asking a node to perform a calculation.</li>
<li>Each service has exactly one <i>server</i>, but multiple clients can connect to the same server.</li>
<li><code>ros2 service</code> provides commands for investigating topics.</li>
</ul>
<p>
-<code>rqt</code> also provides plugins for working with services.
</p>
<ul class="org-ul">
<li>See the <a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Services.html">Services</a> conceptual documentation for more information.</li>
</ul>
</div>
</div>

<div id="outline-container-actions" class="outline-3">
<h3 id="actions">Actions</h3>
<div class="outline-text-3" id="text-actions">
<p>
<a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Actions</a> enable a client to initiate a long-running task and receive periodic feedback.
</p>
<ul class="org-ul">
<li>Actions consist of three parts: a <i>request</i>, a <i>result</i>, and <i>feedback</i>.</li>
<li>The <i>action server</i> receives a request from an <i>action client</i> (much like a service) and periodically sends <i>feedback</i> (over a <i>topic</i>) until the action is complete, whereupon it sends a <i>result</i> (like a service <i>response</i>).</li>
<li>If the client wants to cancel the action before it is complete, it can send a <i>cancel</i> request to the <i>action server</i>.</li>
<li>Actions are implemented, at a lower-level, in terms of services and topics.
<ul class="org-ul">
<li>In ROS 2, these services and topics are hidden by default</li>
<li>Passing <code>--include-hidden-topics</code> to <code>ros2 topic</code> and <code>--include-hidden-services</code> to <code>ros2 service</code> provides access to these hidden topics and services</li>
</ul></li>
<li><code>ros2 action</code> provides commands for examining actions.</li>
<li><code>rqt</code> also provides plugins for working with actions.</li>
<li>Tutorials: <a href="https://docs.ros.org/en/kilted/Tutorials/Intermediate/Creating-an-Action.html">Creating Custom Actions</a>  and <a href="https://docs.ros.org/en/kilted/Tutorials/Intermediate/Writing-an-Action-Server-Client/Py.html">Writing an Action Tutorial</a></li>
<li>See <a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Understanding Actions</a> and the <a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Actions.html">Actions</a> conceptual documentation for more information.</li>
<li>The <a href="http://design.ros2.org/articles/actions.html">Actions Design Document</a> also provides useful information</li>
</ul>
</div>
</div>

<div id="outline-container-interfaces-2-P-2" class="outline-3">
<h3 id="interfaces-2-P-2">Interfaces</h3>
<div class="outline-text-3" id="text-orgbbafd37">
<ul class="org-ul">
<li><a href="https://docs.ros.org/en/kilted/Concepts/About-ROS-Interfaces.html">Interfaces</a> are a generic name for Topics, Services, and Actions (the interface to a node).
<ul class="org-ul">
<li>Topics have an associated <i>Message Type</i> that determines the layout of the message published to the topic.</li>
<li>Services have an associated <i>Service Type</i> that determines the layout of the associated request and response.</li>
<li>Actions have an associated <i>Action Type</i> that determines the layout of the request, result, and feedback.</li>
<li>An <i>Interface Type</i> generically refers to <i>Message Type</i>, <i>Service Type</i> or <i>Action Type</i>.</li>
<li>Sometimes, in conversation we say "Interface", "Message", "Service" or "Action" to mean the associated type: context makes the distinction.</li>
</ul></li>

<li>ROS Interface Types are specified using the Interface Definition Language (IDL):
<ul class="org-ul">
<li>Message Types are specified in <code>&lt;pkg&gt;/msg/&lt;MessageType&gt;.msg</code> files</li>
<li>Service Types are specified in <code>&lt;pkg&gt;/srv/&lt;ServiceType&gt;.srv</code> files</li>
<li>Action  Types are stored in <code>&lt;pkg&gt;/action/&lt;ActionType&gt;.action</code> files</li>
</ul></li>
</ul>
</div>
<div id="outline-container-ros-idl-3-P-1" class="outline-4">
<h4 id="ros-idl-3-P-1">ROS IDL</h4>
<div class="outline-text-4" id="text-org3fb02ec">
<ul class="org-ul">
<li>Each line in an IDL file specifies a field in the data type.</li>
<li>Each field contains a type-specifier and the name of the field.
<ul class="org-ul">
<li>The ROS IDL has several built-in <a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Interfaces.html#field-types">types</a> (e.g., bool, uint32, string, and arrays of these types)</li>
<li>Messages can also be used as a type (and therefore IDL types can be nested).</li>
<li>It is also possible to define constants in the IDL.</li>
</ul></li>
<li>Service files contain both a request and a response (in that order). They are separated by a single line containing <code>---</code>.</li>
<li>Action files  contain a request, a result, and a feedback (in that order). Each of these is separated by a single line containing <code>---</code>.</li>
<li>Interface files are converted into data types in the programming languages ROS targets:
<ul class="org-ul">
<li><a href="https://github.com/ros2/rosidl">rosidl</a> Contains basic IDL functionality, including code to generate interfaces code for C and to C++.</li>
<li><a href="https://github.com/ros2/rosidl_python">rosidl_python</a> contains code to convert interface files to python.</li>
</ul></li>
<li>Use <code>ros2 interface</code>  to get information about interfaces.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-ros-graph-1-P-1" class="outline-2">
<h2 id="ros-graph-1-P-1">ROS Graph</h2>
<div class="outline-text-2" id="text-org8007df8">
<ul class="org-ul">
<li>All running nodes in a ROS system can be thought of as vertices (aka nodes) in a computation graph.</li>
<li>All topics in a ROS system can be thought of as the directed edges in a computation graph.</li>
<li>The ROS graph can be visualized in <code>rqt</code> or by using <code>rqt_graph</code>.</li>
<li>ROS 2 communication is based on a standard message-passing protocol called <a href="https://www.omg.org/omg-dds-portal/">Data Distribution Service</a> (DDS)
<ul class="org-ul">
<li>The standard uses Real-Time Publish Subscribe (RTPS) to define a common data-exchange format between DDS vendors.</li>
<li>The <a href="https://docs.ros.org/en/kilted/Concepts/About-ROS-2-Client-Libraries.html">ROS 2 client libraries</a> provide abstractions around this protocol.
via the <a href="https://docs.ros.org/en/kilted/Concepts/About-Middleware-Implementations.html">ROS Middleware</a> (rmw).</li>
<li>Multiple vendors provide implementations of DDS, but rmw enables a user to theoretically change DDS implementations without affecting the rest of the code.</li>
<li>There are different reasons (both technical and non-technical) for using different DDS implementations, see <a href="https://docs.ros.org/en/kilted/Concepts/About-Different-Middleware-Vendors.html">About different ROS 2 DDS/RTPS vendors</a> for details</li>
<li>We will use the default DDS implementation.</li>
</ul></li>
<li>In ROS 2, nodes are able to discover and connect to each other automatically, but this can also be changed to be more manual.</li>
<li><a href="https://docs.ros.org/en/kilted/Concepts/About-Quality-of-Service-Settings.html">Quality of Service</a> settings determine polices for how data is handled when
being exchanged (whether via topics or services):
<ul class="org-ul">
<li>QoS determines what to do various scenarios such as communication over an unreliable connection or when messages are coming in too fast to be processed.</li>
<li>Generally nodes must have the same QoS settings to communicate properly.</li>
<li>We will be using the default QoS settings.</li>
</ul></li>
</ul>
</div>

<div id="outline-container-differences-from-ros-1-2-P-1" class="outline-3">
<h3 id="differences-from-ros-1-2-P-1">Differences from ROS 1</h3>
<div class="outline-text-3" id="text-org1782aa0">
<ul class="org-ul">
<li>In ROS 1, all nodes register themselves with a central server called <a href="https://wiki.ros.org/roscore">roscore</a>, which must be running at all times</li>
<li>ROS 1 uses a custom IPC protocol based on XML, and there is no concept of Quality of Service.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-parameters" class="outline-2">
<h2 id="parameters">Parameters</h2>
<div class="outline-text-2" id="text-parameters">
<p>
ROS <a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">Parameters</a> enable storing configuration
values for a node.
</p>
<ul class="org-ul">
<li>Parameters are used as settings that can be accessed by all ROS nodes and modified by the user to change node behavior.</li>
<li>Use <code>ros2 param</code> to perform actions on nodes.</li>
<li>Typically, nodes read parameters when they start, however, in ROS 2, a callback can respond to parameter changes.</li>
<li>Parameters can store strings, integers, floats, dates, times, and lists.</li>
<li>Oftentimes, parameters are set in Launchfiles, to provide each node you are starting with the proper configuration information</li>
<li>See the <a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Parameters.html">Parameters</a> conceptual documentation for more information.</li>
</ul>
</div>
<div id="outline-container-yaml-files-3-P-1" class="outline-4">
<h4 id="yaml-files-3-P-1">Yaml Files</h4>
<div class="outline-text-4" id="text-orge4804c2">
<ul class="org-ul">
<li>Parameters are specified using the <a href="http://wiki.ros.org/rosparam">YAML</a> format</li>
<li>YAML files can be stored on disk and loaded by <code>rosparam</code> or a launchfile into the parameter server</li>
</ul>
</div>
</div>

<div id="outline-container-differences-from-ros-1-2-P-2" class="outline-3">
<h3 id="differences-from-ros-1-2-P-2">Differences from ROS 1</h3>
<div class="outline-text-3" id="text-org1c4fa00">
<ul class="org-ul">
<li>In ROS 1 parameters are stored in a central server called the ROS parameter server.</li>
<li>The behavior of a central parameter server can be emulated by creating a node that is only used to store parameters.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-launchfiles-1-P-1" class="outline-2">
<h2 id="launchfiles-1-P-1">Launchfiles</h2>
<div class="outline-text-2" id="text-org0727d74">
<p>
<a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">Launchfiles</a> enable multiple nodes to be
started with a single command.
</p>
<ul class="org-ul">
<li>In ROS 2 there are 3 formats for a <a href="https://docs.ros.org/en/kilted/Tutorials/Intermediate/Launch/Launch-Main.html">launch file</a>
<ul class="org-ul">
<li>Python: python scripts that use the ROS 2 launch API to configure and run nodes. The most flexible and powerful but also most complicated.</li>
<li>XML: The format as in ROS 1. Directly declares what nodes are running but can perform minimal logic.</li>
<li>YAML: Another format for writing what is essentially the same as an XML launchfile (do you like tags or indentation?)</li>
</ul></li>
<li><code>ros2 launch</code> lets you run and interact with launchfiles.</li>
<li>Strive to have one launchfile completely start your project</li>
</ul>
</div>
</div>
<div id="outline-container-bags-1-P-1" class="outline-2">
<h2 id="bags-1-P-1">Bags</h2>
<div class="outline-text-2" id="text-orgf6772df">
<p>
<a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">Bags</a> enable you to capture
data from ROS topics to a file and play them back in real time.
</p>
<ul class="org-ul">
<li>Use <code>ros2 bag</code> to interact with and record bags.</li>
<li>Running robotics experiments is often frustrating and difficult.  Capturing the data from a run and
testing different algorithms and parameters on it is extremely useful.</li>
<li><code>rqt</code> has a plugin called <code>rqt_bag</code> that enables interaction with bagfiles.</li>
</ul>
</div>
</div>

<div id="outline-container-logging-1-P-1" class="outline-2">
<h2 id="logging-1-P-1">Logging</h2>
<div class="outline-text-2" id="text-orge34d120">
<p>
Nodes can log information at different <a href="https://docs.ros.org/en/kilted/Tutorials/Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">logger levels</a>, indicating the severity of the message.
</p>
<ul class="org-ul">
<li>There are five verbosity levels: <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</li>
<li>Log data can also be viewed in real time using <code>rqt_console</code></li>
<li>The <code>RCUTILS_CONSOLE_OUTPUT_FORMAT</code> environment variable controls the formatting of log messages</li>
<li>When running a node passing <code>--ros-args --log-level LEVEL</code> sets the logger level
<ul class="org-ul">
<li>To specify a particular node use <code>--ros-args --log-level node_name:=DEBUG</code></li>
</ul></li>
<li><a href="https://docs.ros.org/en/kilted/Tutorials/Demos/Logging-and-logger-configuration.html">Tutorial on Logging</a></li>
<li>Currently, the logger level can only be configured externally after a node is running if the node has enabled logging services, and there are limitations.</li>
</ul>
</div>
</div>
<div id="outline-container-debugging-1-P-1" class="outline-2">
<h2 id="debugging-1-P-1">Debugging</h2>
<div class="outline-text-2" id="text-org22c5e39">
<ul class="org-ul">
<li><code>ros2 doctor</code> can help point out problems with your ROS setup</li>
</ul>
</div>
</div>

<div id="outline-container-names" class="outline-2">
<h2 id="names">Naming in ROS</h2>
<div class="outline-text-2" id="text-names">
</div>
</div>
<div id="outline-container-understanding-names-1-P-2" class="outline-2">
<h2 id="understanding-names-1-P-2">Understanding Names</h2>
<div class="outline-text-2" id="text-org8fea123">
<ol class="org-ol">
<li>Every item in the ROS Computation Graph has a <a href="https://wiki.ros.org/Names">Graph Resource Name</a> (ROS 1 documentation, it is similar in ROS 2)
<ul class="org-ul">
<li>Items include topics, services, nodes, and parameters</li>
</ul></li>
<li>Every ROS 2 node exists within a =/namespace/
<ul class="org-ul">
<li>Namespaces are like directories on Linux: they start from the global namespace (called <code>/</code>) and can be nested (e.g., <code>/ns1/ns2/ns3</code>).</li>
</ul></li>
<li>Just like paths on Linux, ROS names can be relative or absolute
<ul class="org-ul">
<li>An absolute name is any name that starts with a <code>/</code></li>
<li>A <i>relative name</i> is any name that does not start with a <code>/</code>. This name will be interpreted relative to a context (analogous to a working directory)
<ul class="org-ul">
<li>For example, topics that do not start with a <code>/</code> become relative to the namespace the node is in.</li>
</ul></li>
<li>The <i>base name</i> is the name of the entity without any preceding namespaces.
<ul class="org-ul">
<li>Suppose we have a node called <code>/this/is/mynode</code>:
The base name of the node is <code>mynode</code></li>
</ul></li>
<li>A <code>~</code> symbol makes a name <code>private</code>.
<ul class="org-ul">
<li>The <code>~</code> gets expanded to the full absolute name of the node (including the base name).</li>
<li>Private is enforced by convention and just means that the node namespace and name are prepended.</li>
<li>This symbol is analagous to <code>~</code> in the shell.</li>
</ul></li>
</ul></li>
<li>Names should start with a lower case letter, and then can contain letters, or underscores.</li>
</ol>
</div>
<div id="outline-container-example-2-P-3" class="outline-3">
<h3 id="example-2-P-3">Example</h3>
<div class="outline-text-3" id="text-org0f46e6f">
<p>
Suppose we have a node called <code>/this/is/mynode</code>
</p>
<ol class="org-ol">
<li>The base name of the node is <code>mynode</code>.</li>
<li>The namespace of the node is <code>/this/is</code>.</li>
<li>The <code>is</code> namespace is nested under the <code>/this</code> namespace</li>
</ol>

<p>
Suppose <code>/this/is/mynode</code> creates a publisher on the <code>hello</code> topic and a subscriber on the <code>/foo/data</code> topic and a service server called <code>~/help</code>:
</p>
<ol class="org-ol">
<li>The node (by default) will publish to <code>/this/is/hello</code>.</li>
<li>The node (by default) will subscribe to <code>/foo/data</code>.</li>
<li>The node will offer a service (by default) on <code>/this/is/mynode/help</code>.</li>
</ol>
</div>
</div>

<div id="outline-container-comparison-with-ros-1-2-P-2" class="outline-3">
<h3 id="comparison-with-ros-1-2-P-2">Comparison with ROS 1</h3>
<div class="outline-text-3" id="text-org223e766">
<ol class="org-ol">
<li>In ROS 1, parameters were global and followed the same naming conventions as other entities.</li>
<li>In ROS 2, parameters are always associated with a specific node and within that node can optionally have their own <a href="https://docs.ros.org/en/jazzy/Concepts/Basic/About-Parameters.html">parameter namespace</a>.</li>
</ol>
</div>
</div>

<div id="outline-container-remapping" class="outline-3">
<h3 id="remapping">Manipulating Names</h3>
<div class="outline-text-3" id="text-remapping">
<ol class="org-ol">
<li>Resources can be <i>remapped</i> to any name that you want using <a href="https://docs.ros.org/en/jazzy/How-To-Guides/Node-arguments.html">Node Arguments</a>
<ul class="org-ul">
<li>This behavior is like a <code>mv</code> operation in the Linux filesystem</li>
<li>It enables multiple copies of a node to run with different names for the topics they subscribe to</li>
<li>Any name referred to in the node (including absolute and private names) can also be remapped.</li>
<li>To remap a specific name use <code>ros2 run package node --ros-args -r old_name:=new_name</code>
<ul class="org-ul">
<li>Multiple <code>-r</code> arguments can be passed after <code>--ros-args</code> to remap multiple entities</li>
</ul></li>
<li>The node can be renamed using <code>-r __node:=new_node_name</code> in the above</li>
<li>The namespace can be changed using <code>-r __ns:=/new_namespace</code>. The <code>namespace</code> must start with a <code>/</code></li>
</ul></li>

<li>When the node's namespace is changed, all entities (e.g., topics) that used relative names will be moved relative to the provided namespace
<ul class="org-ul">
<li>This behavior makes it easy to remap groups of related names</li>
<li>Namespaces also allow running multiple groups of nodes simultaneously with the same topics</li>
<li>For example, the <code>turtlesim_node</code> supports multiple turtles, each controlled via the same topics. They do not interfere because each turtle is in its own namespace.</li>
</ul></li>
<li>In practice, ROS nodes should be written with <code>remapping</code> in mind:
<ul class="org-ul">
<li>Generally, use simple, base names for ROS nodes, the services they offer, and the topics they publish and subscribe to (so do not include the leading <code>/</code>.
<ul class="org-ul">
<li>This way, your node can easily be run under a different namespace without needing to remap each topic individually</li>
<li>Using absolute node names makes your node less flexible and harder to use.</li>
</ul></li>
<li>Users of the node then remap these topics and services as needed</li>
</ul></li>
</ol>
</div>

<div id="outline-container-a-node-s-ros-api-3-P-1" class="outline-4">
<h4 id="a-node-s-ros-api-3-P-1">A Node's ROS API</h4>
<div class="outline-text-4" id="text-orgc123316">
<ul class="org-ul">
<li>The publishers, subscribers, services, parameters, and actions a node declares comprise it's ROS API
<ul class="org-ul">
<li>They determine how other nodes interact with your node, on a ROS level</li>
</ul></li>
<li>These ROS inter-process communication mechanisms are how you link nodes together, much like
how modules, functions, and classes are used from within python.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-ros-2-structure-1-P-1" class="outline-2">
<h2 id="ros-2-structure-1-P-1">ROS 2 Structure</h2>
<div class="outline-text-2" id="text-orgbc62364">
<p>
The <a href="https://design.ros2.org/articles/ros_middleware_interface.html">design of ROS 2</a> involves several layers of abstraction, which can roughly be summarized as follows:
</p>
<ol class="org-ol">
<li>DDS - <a href="./dds.html">Data Distribution Service</a> handles the low-level communication
<ul class="org-ul">
<li>DDS is a standard. There are multiple DDS implementations provided by different vendors</li>
<li>Sometimes DDS issues leak into your code, but in general, you should be able to use ROS 2 while mostly ignoring DDS details</li>
</ul></li>
<li><a href="https://docs.ros.org/en/kilted/Concepts/Advanced/About-Middleware-Implementations.html">ROS Middleware</a> is an abstract layer that interfaces between ROS 2 and different DDS vendors
<ul class="org-ul">
<li>There is also work to make a ROS middleware that does not use DDS</li>
<li>This is an abstraction layer that allows ROS 2 to switch between different underlying communication methods without changing the user experience (too much)`</li>
</ul></li>
<li><a href="https://docs.ros.org/en/kilted/Concepts/Basic/About-Client-Libraries.html">ROS Client Libraries</a> provide the interface that most ROS 2 users interact with. This is the programming-language-specific API libraries
that abstract away the low-level details of communication. It is built on top of the ROS Middleware layer</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<p><p class="outline-2">Author: Matthew Elwin. </p></p>
</div>
</body>
</html>
